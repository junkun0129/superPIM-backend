generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model asset {
  ast_cd    String     @id @db.Char(36)
  ast_type  String?    @db.VarChar(255)
  ast_img   String?    @db.Text
  ast_name  String?    @db.VarChar(255)
  asb_cd    String?    @db.Char(36)
  pr_cd     String?    @db.Char(36)
  assetbox  assetbox?  @relation(fields: [asb_cd], references: [asb_cd], map: "Asset_asb_cd_fkey")
  product   product?   @relation(fields: [pr_cd], references: [pr_cd], map: "Asset_pr_cd_fkey")
 
  @@index([asb_cd], map: "Asset_asb_cd_fkey")
  @@index([pr_cd], map: "Asset_pr_cd_fkey")
}

model assetbox {
  asb_cd      String     @id @db.Char(36)
  asb_is_main Boolean?
  asb_lbl     String?    @db.VarChar(255)
  asb_type    String?    @db.VarChar(255)
  asset       asset[]
 
}

model attr {
  atr_cd            String      @id @db.Char(36)
  atr_name          String      @db.VarChar(255)
  atr_is_delete     Boolean?
  atr_is_with_unit  Boolean?
  atr_control_type  String?     @db.VarChar(255)
  atr_not_null      Boolean?
  atr_max_length    Int?
  atr_select_list   String?     @db.Text
  atr_default_value String?     @db.VarChar(255)
  atr_unit          String?     @db.VarChar(255)
  atr_created_at    DateTime
  atr_updated_at    DateTime?
  
  attrpcl           attrpcl[]
  attrvalue         attrvalue[]
  header            header[]
}

model attrpcl {
  atp_cd            String   @id @db.Char(36)
  atp_order         Int
  atp_is_show       Boolean?
  atp_alter_name    String?  @db.VarChar(255)
  atp_alter_value   String?  @db.VarChar(255)
  atp_is_common     Boolean?
  atr_cd            String   @db.Char(36)
  pcl_cd            String   @db.Char(36)
  wks_cd            String   @db.Char(36)
  attr              attr     @relation(fields: [atr_cd], references: [atr_cd], map: "AttrPcl_atr_cd_fkey")
  pcl               pcl      @relation(fields: [pcl_cd], references: [pcl_cd], map: "AttrPcl_pcl_cd_fkey")
  workspace         workspace @relation(fields: [wks_cd], references: [wks_cd], map: "AttrPcl_wks_cd_fkey")

  @@index([wks_cd], map: "AttrPcl_wks_cd_fkey")
  @@index([atr_cd], map: "AttrPcl_atr_cd_fkey")
  @@index([pcl_cd], map: "AttrPcl_pcl_cd_fkey")
}

model attrvalue {
  atv_cd    String  @id @db.Char(36)
  atv_value String? @db.Text
  pr_cd     String  @db.Char(36)
  atr_cd    String  @db.Char(36)
  attr      attr    @relation(fields: [atr_cd], references: [atr_cd], map: "AttrValue_atr_cd_fkey")
  product   product @relation(fields: [pr_cd], references: [pr_cd], map: "AttrValue_pr_cd_fkey")

  @@index([atr_cd], map: "AttrValue_atr_cd_fkey")
  @@index([pr_cd], map: "AttrValue_pr_cd_fkey")
}

model category {
  ctg_cd     String       @id @db.Char(36)
  ctg_name   String       @db.VarChar(255)
  ctg_desc   String?      @db.Text
  ctg_order  Int?
  parent_cd  String?      @db.Char(36)

  // 自己参照のリレーション
  parent     category?    @relation("CategoryToSubcategories", fields: [parent_cd], references: [ctg_cd])
  children   category[]   @relation("CategoryToSubcategories")

  prcategory prcategory[]
}

model header {
  hdr_cd    String    @id @db.Char(36)
  attr_cd   String    @db.Char(36)
  wks_cd    String    @db.Char(36)
  hdr_width     String    @db.VarChar(4)
  hdr_order    Int
  attr      attr      @relation(fields: [attr_cd], references: [atr_cd], map: "Header_attr_cd_fkey")
  workspace workspace @relation(fields: [wks_cd], references: [wks_cd], map: "Header_wks_cd_fkey")
  
  @@index([attr_cd], map: "Header_attr_cd_fkey")
  @@index([wks_cd], map: "Header_wks_cd_fkey")
}

model pcl {
  pcl_cd         String    @id @db.Char(36)
  pcl_name       String    @db.VarChar(255)
  pcl_created_at DateTime
  pcl_is_deleted Boolean?
  attrpcl        attrpcl[]
  product        product[]
}

model prcategory {
  prc_cd   String   @id @db.Char(36)
  ctg_cd   String   @db.Char(36)
  pr_cd    String   @db.Char(36)
  category category @relation(fields: [ctg_cd], references: [ctg_cd], map: "PrCategory_ctg_cd_fkey")
  product  product  @relation(fields: [pr_cd], references: [pr_cd], map: "PrCategory_pr_cd_fkey")
  
  @@index([ctg_cd], map: "PrCategory_ctg_cd_fkey")
  @@index([pr_cd], map: "PrCategory_pr_cd_fkey")
}

model product {
  pr_cd                   String       @id @db.Char(36)
  pr_name                 String       @db.VarChar(255)
  pr_is_discontinued      Boolean?
  pr_acpt_status          Int      @default(0)
  pr_acpt_last_updated_at DateTime?
  pr_labels               String?      @db.Text
  pr_created_at           DateTime
  pr_updated_at           DateTime?
  pr_is_deleted           Boolean?
  pr_is_series            Boolean?
  pr_series_cd            String?      @db.Char(36)
  pr_description          String?      @db.Text
  pcl_cd                  String?      @db.Char(36)
  wks_cd                  String       @db.Char(36)
  asset                   asset[]
  attrvalue               attrvalue[]
  prcategory              prcategory[]
  pcl                     pcl?         @relation(fields: [pcl_cd], references: [pcl_cd], map: "Product_pcl_cd_fkey")
  workspace               workspace    @relation(fields: [wks_cd], references: [wks_cd], map: "Product_wks_cd_fkey")

  @@index([pcl_cd], map: "Product_pcl_cd_fkey")
  @@index([wks_cd], map: "Product_wks_cd_fkey")
}

model user {
  user_cd       String          @id @db.Char(36)
  user_email    String          @db.VarChar(255)
  user_groups   String?         @db.VarChar(255)
  user_name     String          @db.VarChar(255)
  user_password String          @db.VarChar(255)
  userworkspace userworkspace[]
}

model userworkspace {
  usw_cd         String    @id @db.Char(36)
  usw_created_at DateTime
  user_cd        String    @db.Char(36)
  wks_cd         String    @db.Char(36)
  user           user      @relation(fields: [user_cd], references: [user_cd], map: "UserWorkspace_user_cd_fkey")
  workspace      workspace @relation(fields: [wks_cd], references: [wks_cd], map: "UserWorkspace_wks_cd_fkey")

  @@index([user_cd], map: "UserWorkspace_user_cd_fkey")
  @@index([wks_cd], map: "UserWorkspace_wks_cd_fkey")
}

model workspace {
  wks_cd         String          @id @db.Char(36)
  wks_name       String          @db.VarChar(255)
  wks_desc       String?         @db.Text
  wks_created_by String          @db.Char(36)
  wks_created_at DateTime
  header         header[]
  product        product[]
  userworkspace  userworkspace[]
  attrpcl        attrpcl[]
}
